<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title> Clients List </ion-title>
    <ion-buttons slot="primary">
      <ion-button
        [hidden]="showEntryText"
        (click)="resetSearch()"
        data-bs-toggle="collapse"
        data-bs-target="#collapseExample"
        ><ion-icon [name]="searchIcon" slot="icon-only"></ion-icon
      ></ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-progress-bar
    [hidden]="hideSkeletonText"
    type="indeterminate"
  ></ion-progress-bar>

  <div [hidden]="!showEntryText" class="container my-2">
    <ion-item
      color="primary"
      lines="none"
      class="border border-3 text-center rounded-3"
    >
      <ion-label class="fs-5 text-warning"> Clida says Hello ðŸ‘‹</ion-label>
    </ion-item>

    <div class="bgLight rounded-3 px-3 py-2 my-2">
      <div class="justifyText mb-2">
        To load previously saved data from a json file, click the Export/Import
        button or navigate to the Share tab in the bottom navigation bar.
      </div>
      <div class="text-center">
        <ion-button routerLink="/clida/about"> Export / Import </ion-button>
      </div>
    </div>

    <div class="bgLight rounded-3 px-3 py-2 mb-2">
      <div class="justifyText mb-2">
        To add the clients manually, click on the below button or click on the
        bottom right add button.
      </div>
      <div class="text-center">
        <ion-button color="danger" routerLink="/clida/clients-list/add-client">
          Add new Client
        </ion-button>
      </div>
    </div>

    <div class="mt-2 rounded-3">
      <div class="text-center bg-warning rounded-3 mt-2 pt-2">
        <ion-icon name="alert-circle-outline" size="large"></ion-icon>
      </div>
      <div class="justifyText bgLight py-2 px-3">
        Please save your data periodically using the Share tab. The data will be
        saved in the documents folder in your phone's internal storage, when you
        click on export button.
      </div>
    </div>
  </div>

  <div [hidden]="showEntryText" class="mx-1 mt-2">
    <ion-segment [value]="tabSection" (ionChange)="setrecordType($event)">
      <ion-segment-button value="credits">
        <ion-label>Credits</ion-label>
      </ion-segment-button>
      <ion-segment-button value="debits">
        <ion-label>Debits</ion-label>
      </ion-segment-button>
    </ion-segment>
  </div>

  <div class="collapse sticky-top" id="collapseExample">
    <ion-searchbar
      animated
      color="light"
      placeholder="search clientsr here..."
      [(ngModel)]="clientSearchValue"
      enterkeyhint="search"
      search-icon="search-outline"
    ></ion-searchbar>
  </div>

  <div [hidden]="showEntryText">
    <div class="debitList" [hidden]="!showDebitList">
      <ion-item
        *ngFor="let client of debitData | clientsSearch:clientSearchValue"
        (click)="openClientDetails(client.key)"
        color="light"
        class="m-2 rounded"
        lines="none"
      >
        <div>{{client?.data.name}}</div>
        <div class="ms-auto text-end">
          <ion-badge
            *ngFor="let clientDetail of client.data.data"
            class="ms-1"
            [color]="getColor(clientDetail)"
            slot="end"
            >{{(clientDetail.principal/1000).toFixed() + 'K'}}
          </ion-badge>
        </div>
      </ion-item>
    </div>

    <div class="creditList" [hidden]="showDebitList">
      <ion-item
        *ngFor="let client of creditData | clientsSearch:clientSearchValue"
        (click)="openClientDetails(client.key)"
        color="light"
        class="m-2 rounded"
        lines="none"
      >
        <div>{{client?.data.name}}</div>
        <div class="ms-auto text-end">
          <ion-badge
            *ngFor="let clientDetail of client.data.data"
            class="ms-1"
            [color]="getColor(clientDetail)"
            >{{(clientDetail.principal/1000).toFixed() + 'K'}}
          </ion-badge>
        </div>
      </ion-item>
    </div>
  </div>
  <ion-item color="medium" lines="none"></ion-item>

  <ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button color="danger" routerLink="add-client" class="me-1 mb-1">
      <ion-icon name="add" size="large"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</ion-content>
